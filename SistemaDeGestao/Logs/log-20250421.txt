2025-04-21 03:16:10.816 -03:00 [ERR] An error occurred using the connection to database '' on server 'mysql'.
2025-04-21 03:16:41.006 -03:00 [ERR] An error occurred using the connection to database '' on server 'mysql'.
2025-04-21 03:17:37.213 -03:00 [ERR] An error occurred using the connection to database '' on server 'mysql'.
2025-04-21 03:20:11.137 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:20:35.470 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:21:44.764 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:23:42.559 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:17.913 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:17.982 -03:00 [INF] A transient exception occurred during execution. The operation will be retried after 0ms.
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
2025-04-21 03:26:20.315 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:20.316 -03:00 [INF] A transient exception occurred during execution. The operation will be retried after 1029ms.
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
2025-04-21 03:26:24.061 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:24.062 -03:00 [INF] A transient exception occurred during execution. The operation will be retried after 3081ms.
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
2025-04-21 03:26:29.456 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:29.457 -03:00 [INF] A transient exception occurred during execution. The operation will be retried after 7433ms.
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
2025-04-21 03:26:39.234 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:39.235 -03:00 [INF] A transient exception occurred during execution. The operation will be retried after 15620ms.
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
2025-04-21 03:26:57.186 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:26:57.187 -03:00 [INF] A transient exception occurred during execution. The operation will be retried after 30000ms.
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
MySqlConnector.MySqlException (0x80004005): Unable to connect to any of the specified MySQL hosts.
   at MySqlConnector.Core.ServerSession.ConnectAsync(ConnectionSettings cs, MySqlConnection connection, Int64 startingTimestamp, ILoadBalancer loadBalancer, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 437
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 932
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 938
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at MySqlConnector.MySqlConnection.Open() in /_/src/MySqlConnector/MySqlConnection.cs:line 381
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternal(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlRelationalConnection.Open(Boolean errorsExpected)
   at Pomelo.EntityFrameworkCore.MySql.Storage.Internal.MySqlDatabaseCreator.<>c__DisplayClass18_0.<Exists>b__0(DateTime giveUp)
   at Microsoft.EntityFrameworkCore.ExecutionStrategyExtensions.<>c__DisplayClass12_0`2.<Execute>b__0(DbContext _, TState s)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass28_0`2.<Execute>b__0(DbContext context, TState state)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementation[TState,TResult](Func`3 operation, Func`3 verifySucceeded, TState state)
2025-04-21 03:27:29.484 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:31:13.780 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:33:30.367 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 03:35:19.341 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 10:40:31.094 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 10:41:45.717 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE DATABASE `sistema`;
2025-04-21 10:41:45.912 -03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:45.964 -03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='sistema' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 10:41:45.980 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-04-21 10:41:45.994 -03:00 [INF] Applying migration '20250419202540_FirstMigration'.
2025-04-21 10:41:46.090 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-04-21 10:41:46.127 -03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `DiasFuncionamento` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Domingo` tinyint(1) NOT NULL,
    `Segunda` tinyint(1) NOT NULL,
    `Terca` tinyint(1) NOT NULL,
    `Quarta` tinyint(1) NOT NULL,
    `Quinta` tinyint(1) NOT NULL,
    `Sexta` tinyint(1) NOT NULL,
    `Sabado` tinyint(1) NOT NULL,
    CONSTRAINT `PK_DiasFuncionamento` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.148 -03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `EnderecosEntregas` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Logradouro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Numero` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Complemento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CEP` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_EnderecosEntregas` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.169 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `FinalUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Telefone` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCriacao` datetime(6) NOT NULL,
    CONSTRAINT `PK_FinalUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.193 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidoPagamento` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `SubTotal` decimal(18,2) NOT NULL,
    `TransactionId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `TaxaEntrega` decimal(18,2) NOT NULL,
    `Desconto` decimal(18,2) NOT NULL,
    `ValorTotal` decimal(18,2) NOT NULL,
    `FormaPagamento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PagamentoAprovado` tinyint(1) NOT NULL,
    `DataAprovacao` datetime(6) NULL,
    CONSTRAINT `PK_PedidoPagamento` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.214 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidosPendentes` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `TransactionId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PedidoJson` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCriacao` datetime(6) NOT NULL,
    CONSTRAINT `PK_PedidosPendentes` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.243 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Restaurantes` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserName` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `EmailAddress` longtext CHARACTER SET utf8mb4 NULL,
    `NomeDaLoja` longtext CHARACTER SET utf8mb4 NULL,
    `Password` longtext CHARACTER SET utf8mb4 NOT NULL,
    `refreshToken` longtext CHARACTER SET utf8mb4 NULL,
    `refreshTokenExpiryTime` datetime(6) NOT NULL,
    CONSTRAINT `PK_Restaurantes` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.270 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Categorias` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_Categorias` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Categorias_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.309 -03:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Empresas` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CNPJ` longtext CHARACTER SET utf8mb4 NULL,
    `CPF` longtext CHARACTER SET utf8mb4 NULL,
    `RazaoSocial` longtext CHARACTER SET utf8mb4 NULL,
    `NomeFantasia` longtext CHARACTER SET utf8mb4 NULL,
    `Endereco` longtext CHARACTER SET utf8mb4 NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NULL,
    `Estado` longtext CHARACTER SET utf8mb4 NULL,
    `Cep` longtext CHARACTER SET utf8mb4 NULL,
    `HorarioAbertura` time(6) NOT NULL,
    `HorarioFechamento` time(6) NOT NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NULL,
    `RestauranteId` int NOT NULL,
    `DiasFuncionamentoId` int NOT NULL,
    CONSTRAINT `PK_Empresas` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Empresas_DiasFuncionamento_DiasFuncionamentoId` FOREIGN KEY (`DiasFuncionamentoId`) REFERENCES `DiasFuncionamento` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Empresas_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.361 -03:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `GrupoAdicionais` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `LimiteSelecao` int NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_GrupoAdicionais` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_GrupoAdicionais_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.394 -03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `GrupoComplementos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `Obrigatorio` tinyint(1) NOT NULL,
    `QuantidadeMinima` int NULL,
    `QuantidadeMaxima` int NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_GrupoComplementos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_GrupoComplementos_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.447 -03:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Pedidos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Numero` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataPedido` datetime(6) NOT NULL,
    `Status` int NOT NULL,
    `FinalUserId` int NULL,
    `FinalUserName` varchar(256) CHARACTER SET utf8mb4 NOT NULL,
    `FinalUserTelefone` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `EnderecoEntregaId` int NULL,
    `NomeDaLoja` longtext CHARACTER SET utf8mb4 NOT NULL,
    `RestauranteId` int NOT NULL,
    `PagamentoId` int NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Pedidos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Pedidos_EnderecosEntregas_EnderecoEntregaId` FOREIGN KEY (`EnderecoEntregaId`) REFERENCES `EnderecosEntregas` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Pedidos_FinalUsers_FinalUserId` FOREIGN KEY (`FinalUserId`) REFERENCES `FinalUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Pedidos_PedidoPagamento_PagamentoId` FOREIGN KEY (`PagamentoId`) REFERENCES `PedidoPagamento` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Pedidos_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:46.485 -03:00 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RestauranteCredenciaisMercadoPago` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RestauranteId` int NOT NULL,
    `PublicKey` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AccessToken` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ClientId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ClientSecret` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCadastro` datetime(6) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    CONSTRAINT `PK_RestauranteCredenciaisMercadoPago` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_RestauranteCredenciaisMercadoPago_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:48.846 -03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Produtos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NULL,
    `CategoriaId` int NOT NULL,
    `PrecoCusto` decimal(18,2) NOT NULL,
    `PrecoVenda` decimal(18,2) NOT NULL,
    `EstoqueAtual` int NOT NULL,
    `EstoqueMinimo` int NOT NULL,
    `UnidadeMedida` longtext CHARACTER SET utf8mb4 NULL,
    `Ativo` tinyint(1) NOT NULL,
    `DataCadastro` datetime(6) NOT NULL,
    `ImagemPrincipalUrl` longtext CHARACTER SET utf8mb4 NULL,
    `LojaId` int NOT NULL,
    CONSTRAINT `PK_Produtos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Produtos_Categorias_CategoriaId` FOREIGN KEY (`CategoriaId`) REFERENCES `Categorias` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Produtos_Restaurantes_LojaId` FOREIGN KEY (`LojaId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:48.871 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Adicionais` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `PrecoBase` decimal(18,2) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    `GrupoAdicionalId` int NULL,
    `EstoqueAtual` int NULL,
    `DataCadastro` datetime(6) NOT NULL,
    CONSTRAINT `PK_Adicionais` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Adicionais_GrupoAdicionais_GrupoAdicionalId` FOREIGN KEY (`GrupoAdicionalId`) REFERENCES `GrupoAdicionais` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:48.898 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Complementos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `Preco` decimal(18,2) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    `GrupoComplementoId` int NULL,
    `EstoqueAtual` int NULL,
    `DataCadastro` datetime(6) NOT NULL,
    CONSTRAINT `PK_Complementos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Complementos_GrupoComplementos_GrupoComplementoId` FOREIGN KEY (`GrupoComplementoId`) REFERENCES `GrupoComplementos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:48.930 -03:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidosCancelados` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PedidoId` int NOT NULL,
    `DataCancelamento` datetime(6) NOT NULL,
    `MotivoCancelamento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CodigoReembolso` longtext CHARACTER SET utf8mb4 NOT NULL,
    `EstaReembolsado` tinyint(1) NOT NULL,
    `ValorReembolsado` decimal(65,30) NOT NULL,
    `TransacaoReembolsoId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `FinalUserId` int NOT NULL,
    CONSTRAINT `PK_PedidosCancelados` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PedidosCancelados_FinalUsers_FinalUserId` FOREIGN KEY (`FinalUserId`) REFERENCES `FinalUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PedidosCancelados_Pedidos_PedidoId` FOREIGN KEY (`PedidoId`) REFERENCES `Pedidos` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:48.963 -03:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ItensPedido` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PedidoId` int NOT NULL,
    `ProdutoId` int NOT NULL,
    `NomeProduto` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Quantidade` int NOT NULL,
    `PrecoUnitario` decimal(18,2) NOT NULL,
    `SubTotal` decimal(18,2) NOT NULL,
    `PrecoCusto` decimal(18,2) NOT NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_ItensPedido` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ItensPedido_Pedidos_PedidoId` FOREIGN KEY (`PedidoId`) REFERENCES `Pedidos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ItensPedido_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:51.069 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoGrupoAdicional` (
    `ProdutoId` int NOT NULL,
    `GrupoAdicionalId` int NOT NULL,
    CONSTRAINT `PK_ProdutoGrupoAdicional` PRIMARY KEY (`ProdutoId`, `GrupoAdicionalId`),
    CONSTRAINT `FK_ProdutoGrupoAdicional_GrupoAdicionais_GrupoAdicionalId` FOREIGN KEY (`GrupoAdicionalId`) REFERENCES `GrupoAdicionais` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoGrupoAdicional_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:51.097 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutosGruposComplementos` (
    `ProdutoId` int NOT NULL,
    `GrupoComplementoId` int NOT NULL,
    CONSTRAINT `PK_ProdutosGruposComplementos` PRIMARY KEY (`ProdutoId`, `GrupoComplementoId`),
    CONSTRAINT `FK_ProdutosGruposComplementos_GrupoComplementos_GrupoComplement~` FOREIGN KEY (`GrupoComplementoId`) REFERENCES `GrupoComplementos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutosGruposComplementos_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:51.127 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoAdicionais` (
    `ProdutoId` int NOT NULL,
    `AdicionalId` int NOT NULL,
    `Id` int NOT NULL,
    `PrecoAdicional` decimal(65,30) NOT NULL,
    `MaximoPorProduto` int NULL,
    CONSTRAINT `PK_ProdutoAdicionais` PRIMARY KEY (`ProdutoId`, `AdicionalId`),
    CONSTRAINT `FK_ProdutoAdicionais_Adicionais_AdicionalId` FOREIGN KEY (`AdicionalId`) REFERENCES `Adicionais` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoAdicionais_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:51.155 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoComplementos` (
    `ProdutoId` int NOT NULL,
    `ComplementoId` int NOT NULL,
    `Id` int NOT NULL,
    `Obrigatorio` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    CONSTRAINT `PK_ProdutoComplementos` PRIMARY KEY (`ProdutoId`, `ComplementoId`),
    CONSTRAINT `FK_ProdutoComplementos_Complementos_ComplementoId` FOREIGN KEY (`ComplementoId`) REFERENCES `Complementos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoComplementos_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:51.183 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ItemPedidoOpcao` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ItemPedidoId` int NOT NULL,
    `TipoOpcao` int NOT NULL,
    `ReferenciaId` int NOT NULL,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Quantidade` int NOT NULL,
    `PrecoUnitario` decimal(18,2) NOT NULL,
    CONSTRAINT `PK_ItemPedidoOpcao` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ItemPedidoOpcao_ItensPedido_ItemPedidoId` FOREIGN KEY (`ItemPedidoId`) REFERENCES `ItensPedido` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:41:51.218 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Adicionais_GrupoAdicionalId` ON `Adicionais` (`GrupoAdicionalId`);
2025-04-21 10:41:51.241 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Categorias_RestauranteId` ON `Categorias` (`RestauranteId`);
2025-04-21 10:41:51.263 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Complementos_GrupoComplementoId` ON `Complementos` (`GrupoComplementoId`);
2025-04-21 10:41:53.511 -03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Empresas_DiasFuncionamentoId` ON `Empresas` (`DiasFuncionamentoId`);
2025-04-21 10:41:53.530 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Empresas_RestauranteId` ON `Empresas` (`RestauranteId`);
2025-04-21 10:41:53.562 -03:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_GrupoAdicionais_RestauranteId` ON `GrupoAdicionais` (`RestauranteId`);
2025-04-21 10:41:53.585 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_GrupoComplementos_RestauranteId` ON `GrupoComplementos` (`RestauranteId`);
2025-04-21 10:41:53.606 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItemPedidoOpcao_ItemPedidoId` ON `ItemPedidoOpcao` (`ItemPedidoId`);
2025-04-21 10:41:53.634 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItensPedido_PedidoId` ON `ItensPedido` (`PedidoId`);
2025-04-21 10:41:53.664 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItensPedido_ProdutoId` ON `ItensPedido` (`ProdutoId`);
2025-04-21 10:41:53.699 -03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_EnderecoEntregaId` ON `Pedidos` (`EnderecoEntregaId`);
2025-04-21 10:41:53.728 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_FinalUserId` ON `Pedidos` (`FinalUserId`);
2025-04-21 10:41:53.751 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Pedidos_PagamentoId` ON `Pedidos` (`PagamentoId`);
2025-04-21 10:41:53.777 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_RestauranteId` ON `Pedidos` (`RestauranteId`);
2025-04-21 10:41:53.801 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PedidosCancelados_FinalUserId` ON `PedidosCancelados` (`FinalUserId`);
2025-04-21 10:41:53.820 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PedidosCancelados_PedidoId` ON `PedidosCancelados` (`PedidoId`);
2025-04-21 10:41:53.844 -03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoAdicionais_AdicionalId` ON `ProdutoAdicionais` (`AdicionalId`);
2025-04-21 10:41:53.866 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoComplementos_ComplementoId` ON `ProdutoComplementos` (`ComplementoId`);
2025-04-21 10:41:53.884 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoGrupoAdicional_GrupoAdicionalId` ON `ProdutoGrupoAdicional` (`GrupoAdicionalId`);
2025-04-21 10:41:53.920 -03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Produtos_CategoriaId` ON `Produtos` (`CategoriaId`);
2025-04-21 10:41:53.956 -03:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Produtos_LojaId` ON `Produtos` (`LojaId`);
2025-04-21 10:41:53.990 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutosGruposComplementos_GrupoComplementoId` ON `ProdutosGruposComplementos` (`GrupoComplementoId`);
2025-04-21 10:41:54.008 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_RestauranteCredenciaisMercadoPago_RestauranteId` ON `RestauranteCredenciaisMercadoPago` (`RestauranteId`);
2025-04-21 10:41:54.015 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250419202540_FirstMigration', '8.0.8');
2025-04-21 10:43:10.986 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='db_lai' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 10:43:11.132 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.147 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='db_lai' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 10:43:11.155 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-04-21 10:43:11.166 -03:00 [INF] Applying migration '20250419202540_FirstMigration'.
2025-04-21 10:43:11.258 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-04-21 10:43:11.288 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `DiasFuncionamento` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Domingo` tinyint(1) NOT NULL,
    `Segunda` tinyint(1) NOT NULL,
    `Terca` tinyint(1) NOT NULL,
    `Quarta` tinyint(1) NOT NULL,
    `Quinta` tinyint(1) NOT NULL,
    `Sexta` tinyint(1) NOT NULL,
    `Sabado` tinyint(1) NOT NULL,
    CONSTRAINT `PK_DiasFuncionamento` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.309 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `EnderecosEntregas` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Logradouro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Numero` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Complemento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CEP` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_EnderecosEntregas` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.329 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `FinalUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Telefone` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCriacao` datetime(6) NOT NULL,
    CONSTRAINT `PK_FinalUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.350 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidoPagamento` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `SubTotal` decimal(18,2) NOT NULL,
    `TransactionId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `TaxaEntrega` decimal(18,2) NOT NULL,
    `Desconto` decimal(18,2) NOT NULL,
    `ValorTotal` decimal(18,2) NOT NULL,
    `FormaPagamento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PagamentoAprovado` tinyint(1) NOT NULL,
    `DataAprovacao` datetime(6) NULL,
    CONSTRAINT `PK_PedidoPagamento` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.368 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidosPendentes` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `TransactionId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PedidoJson` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCriacao` datetime(6) NOT NULL,
    CONSTRAINT `PK_PedidosPendentes` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.388 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Restaurantes` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserName` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `EmailAddress` longtext CHARACTER SET utf8mb4 NULL,
    `NomeDaLoja` longtext CHARACTER SET utf8mb4 NULL,
    `Password` longtext CHARACTER SET utf8mb4 NOT NULL,
    `refreshToken` longtext CHARACTER SET utf8mb4 NULL,
    `refreshTokenExpiryTime` datetime(6) NOT NULL,
    CONSTRAINT `PK_Restaurantes` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.410 -03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Categorias` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_Categorias` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Categorias_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.440 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Empresas` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CNPJ` longtext CHARACTER SET utf8mb4 NULL,
    `CPF` longtext CHARACTER SET utf8mb4 NULL,
    `RazaoSocial` longtext CHARACTER SET utf8mb4 NULL,
    `NomeFantasia` longtext CHARACTER SET utf8mb4 NULL,
    `Endereco` longtext CHARACTER SET utf8mb4 NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NULL,
    `Estado` longtext CHARACTER SET utf8mb4 NULL,
    `Cep` longtext CHARACTER SET utf8mb4 NULL,
    `HorarioAbertura` time(6) NOT NULL,
    `HorarioFechamento` time(6) NOT NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NULL,
    `RestauranteId` int NOT NULL,
    `DiasFuncionamentoId` int NOT NULL,
    CONSTRAINT `PK_Empresas` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Empresas_DiasFuncionamento_DiasFuncionamentoId` FOREIGN KEY (`DiasFuncionamentoId`) REFERENCES `DiasFuncionamento` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Empresas_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.558 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `GrupoAdicionais` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `LimiteSelecao` int NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_GrupoAdicionais` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_GrupoAdicionais_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.585 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `GrupoComplementos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `Obrigatorio` tinyint(1) NOT NULL,
    `QuantidadeMinima` int NULL,
    `QuantidadeMaxima` int NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_GrupoComplementos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_GrupoComplementos_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.632 -03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Pedidos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Numero` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataPedido` datetime(6) NOT NULL,
    `Status` int NOT NULL,
    `FinalUserId` int NULL,
    `FinalUserName` varchar(256) CHARACTER SET utf8mb4 NOT NULL,
    `FinalUserTelefone` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `EnderecoEntregaId` int NULL,
    `NomeDaLoja` longtext CHARACTER SET utf8mb4 NOT NULL,
    `RestauranteId` int NOT NULL,
    `PagamentoId` int NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Pedidos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Pedidos_EnderecosEntregas_EnderecoEntregaId` FOREIGN KEY (`EnderecoEntregaId`) REFERENCES `EnderecosEntregas` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Pedidos_FinalUsers_FinalUserId` FOREIGN KEY (`FinalUserId`) REFERENCES `FinalUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Pedidos_PedidoPagamento_PagamentoId` FOREIGN KEY (`PagamentoId`) REFERENCES `PedidoPagamento` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Pedidos_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:11.660 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RestauranteCredenciaisMercadoPago` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RestauranteId` int NOT NULL,
    `PublicKey` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AccessToken` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ClientId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ClientSecret` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCadastro` datetime(6) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    CONSTRAINT `PK_RestauranteCredenciaisMercadoPago` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_RestauranteCredenciaisMercadoPago_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:14.388 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Produtos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NULL,
    `CategoriaId` int NOT NULL,
    `PrecoCusto` decimal(18,2) NOT NULL,
    `PrecoVenda` decimal(18,2) NOT NULL,
    `EstoqueAtual` int NOT NULL,
    `EstoqueMinimo` int NOT NULL,
    `UnidadeMedida` longtext CHARACTER SET utf8mb4 NULL,
    `Ativo` tinyint(1) NOT NULL,
    `DataCadastro` datetime(6) NOT NULL,
    `ImagemPrincipalUrl` longtext CHARACTER SET utf8mb4 NULL,
    `LojaId` int NOT NULL,
    CONSTRAINT `PK_Produtos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Produtos_Categorias_CategoriaId` FOREIGN KEY (`CategoriaId`) REFERENCES `Categorias` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Produtos_Restaurantes_LojaId` FOREIGN KEY (`LojaId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:14.415 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Adicionais` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `PrecoBase` decimal(18,2) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    `GrupoAdicionalId` int NULL,
    `EstoqueAtual` int NULL,
    `DataCadastro` datetime(6) NOT NULL,
    CONSTRAINT `PK_Adicionais` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Adicionais_GrupoAdicionais_GrupoAdicionalId` FOREIGN KEY (`GrupoAdicionalId`) REFERENCES `GrupoAdicionais` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:14.443 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Complementos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `Preco` decimal(18,2) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    `GrupoComplementoId` int NULL,
    `EstoqueAtual` int NULL,
    `DataCadastro` datetime(6) NOT NULL,
    CONSTRAINT `PK_Complementos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Complementos_GrupoComplementos_GrupoComplementoId` FOREIGN KEY (`GrupoComplementoId`) REFERENCES `GrupoComplementos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:14.489 -03:00 [INF] Executed DbCommand (46ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidosCancelados` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PedidoId` int NOT NULL,
    `DataCancelamento` datetime(6) NOT NULL,
    `MotivoCancelamento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CodigoReembolso` longtext CHARACTER SET utf8mb4 NOT NULL,
    `EstaReembolsado` tinyint(1) NOT NULL,
    `ValorReembolsado` decimal(65,30) NOT NULL,
    `TransacaoReembolsoId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `FinalUserId` int NOT NULL,
    CONSTRAINT `PK_PedidosCancelados` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PedidosCancelados_FinalUsers_FinalUserId` FOREIGN KEY (`FinalUserId`) REFERENCES `FinalUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PedidosCancelados_Pedidos_PedidoId` FOREIGN KEY (`PedidoId`) REFERENCES `Pedidos` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:14.524 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ItensPedido` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PedidoId` int NOT NULL,
    `ProdutoId` int NOT NULL,
    `NomeProduto` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Quantidade` int NOT NULL,
    `PrecoUnitario` decimal(18,2) NOT NULL,
    `SubTotal` decimal(18,2) NOT NULL,
    `PrecoCusto` decimal(18,2) NOT NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_ItensPedido` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ItensPedido_Pedidos_PedidoId` FOREIGN KEY (`PedidoId`) REFERENCES `Pedidos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ItensPedido_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:16.633 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoGrupoAdicional` (
    `ProdutoId` int NOT NULL,
    `GrupoAdicionalId` int NOT NULL,
    CONSTRAINT `PK_ProdutoGrupoAdicional` PRIMARY KEY (`ProdutoId`, `GrupoAdicionalId`),
    CONSTRAINT `FK_ProdutoGrupoAdicional_GrupoAdicionais_GrupoAdicionalId` FOREIGN KEY (`GrupoAdicionalId`) REFERENCES `GrupoAdicionais` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoGrupoAdicional_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:16.660 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutosGruposComplementos` (
    `ProdutoId` int NOT NULL,
    `GrupoComplementoId` int NOT NULL,
    CONSTRAINT `PK_ProdutosGruposComplementos` PRIMARY KEY (`ProdutoId`, `GrupoComplementoId`),
    CONSTRAINT `FK_ProdutosGruposComplementos_GrupoComplementos_GrupoComplement~` FOREIGN KEY (`GrupoComplementoId`) REFERENCES `GrupoComplementos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutosGruposComplementos_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:16.690 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoAdicionais` (
    `ProdutoId` int NOT NULL,
    `AdicionalId` int NOT NULL,
    `Id` int NOT NULL,
    `PrecoAdicional` decimal(65,30) NOT NULL,
    `MaximoPorProduto` int NULL,
    CONSTRAINT `PK_ProdutoAdicionais` PRIMARY KEY (`ProdutoId`, `AdicionalId`),
    CONSTRAINT `FK_ProdutoAdicionais_Adicionais_AdicionalId` FOREIGN KEY (`AdicionalId`) REFERENCES `Adicionais` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoAdicionais_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:16.715 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoComplementos` (
    `ProdutoId` int NOT NULL,
    `ComplementoId` int NOT NULL,
    `Id` int NOT NULL,
    `Obrigatorio` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    CONSTRAINT `PK_ProdutoComplementos` PRIMARY KEY (`ProdutoId`, `ComplementoId`),
    CONSTRAINT `FK_ProdutoComplementos_Complementos_ComplementoId` FOREIGN KEY (`ComplementoId`) REFERENCES `Complementos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoComplementos_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:16.741 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ItemPedidoOpcao` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ItemPedidoId` int NOT NULL,
    `TipoOpcao` int NOT NULL,
    `ReferenciaId` int NOT NULL,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Quantidade` int NOT NULL,
    `PrecoUnitario` decimal(18,2) NOT NULL,
    CONSTRAINT `PK_ItemPedidoOpcao` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ItemPedidoOpcao_ItensPedido_ItemPedidoId` FOREIGN KEY (`ItemPedidoId`) REFERENCES `ItensPedido` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 10:43:16.765 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Adicionais_GrupoAdicionalId` ON `Adicionais` (`GrupoAdicionalId`);
2025-04-21 10:43:16.792 -03:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Categorias_RestauranteId` ON `Categorias` (`RestauranteId`);
2025-04-21 10:43:16.822 -03:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Complementos_GrupoComplementoId` ON `Complementos` (`GrupoComplementoId`);
2025-04-21 10:43:18.945 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Empresas_DiasFuncionamentoId` ON `Empresas` (`DiasFuncionamentoId`);
2025-04-21 10:43:18.966 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Empresas_RestauranteId` ON `Empresas` (`RestauranteId`);
2025-04-21 10:43:18.989 -03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_GrupoAdicionais_RestauranteId` ON `GrupoAdicionais` (`RestauranteId`);
2025-04-21 10:43:19.014 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_GrupoComplementos_RestauranteId` ON `GrupoComplementos` (`RestauranteId`);
2025-04-21 10:43:19.036 -03:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItemPedidoOpcao_ItemPedidoId` ON `ItemPedidoOpcao` (`ItemPedidoId`);
2025-04-21 10:43:19.060 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItensPedido_PedidoId` ON `ItensPedido` (`PedidoId`);
2025-04-21 10:43:19.077 -03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItensPedido_ProdutoId` ON `ItensPedido` (`ProdutoId`);
2025-04-21 10:43:19.104 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_EnderecoEntregaId` ON `Pedidos` (`EnderecoEntregaId`);
2025-04-21 10:43:19.127 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_FinalUserId` ON `Pedidos` (`FinalUserId`);
2025-04-21 10:43:19.162 -03:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Pedidos_PagamentoId` ON `Pedidos` (`PagamentoId`);
2025-04-21 10:43:19.186 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_RestauranteId` ON `Pedidos` (`RestauranteId`);
2025-04-21 10:43:19.206 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PedidosCancelados_FinalUserId` ON `PedidosCancelados` (`FinalUserId`);
2025-04-21 10:43:19.224 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PedidosCancelados_PedidoId` ON `PedidosCancelados` (`PedidoId`);
2025-04-21 10:43:19.243 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoAdicionais_AdicionalId` ON `ProdutoAdicionais` (`AdicionalId`);
2025-04-21 10:43:19.265 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoComplementos_ComplementoId` ON `ProdutoComplementos` (`ComplementoId`);
2025-04-21 10:43:19.286 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoGrupoAdicional_GrupoAdicionalId` ON `ProdutoGrupoAdicional` (`GrupoAdicionalId`);
2025-04-21 10:43:19.315 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Produtos_CategoriaId` ON `Produtos` (`CategoriaId`);
2025-04-21 10:43:19.341 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Produtos_LojaId` ON `Produtos` (`LojaId`);
2025-04-21 10:43:19.357 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutosGruposComplementos_GrupoComplementoId` ON `ProdutosGruposComplementos` (`GrupoComplementoId`);
2025-04-21 10:43:19.378 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_RestauranteCredenciaisMercadoPago_RestauranteId` ON `RestauranteCredenciaisMercadoPago` (`RestauranteId`);
2025-04-21 10:43:19.383 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250419202540_FirstMigration', '8.0.8');
2025-04-21 14:18:30.605 -03:00 [INF] User profile is available. Using 'C:\Users\randolfo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-21 14:18:31.080 -03:00 [WRN] Overriding address(es) 'http://0.0.0.0:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-04-21 14:18:31.120 -03:00 [INF] Now listening on: http://0.0.0.0:5000
2025-04-21 14:18:31.207 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-21 14:18:31.208 -03:00 [INF] Hosting environment: Development
2025-04-21 14:18:31.209 -03:00 [INF] Content root path: C:\Users\randolfo\Documents\Sistema-de-Gestao\SistemaDeGesto
2025-04-21 14:22:02.036 -03:00 [INF] User profile is available. Using 'C:\Users\randolfo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-21 14:22:02.192 -03:00 [WRN] Overriding address(es) 'http://0.0.0.0:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-04-21 14:22:02.218 -03:00 [INF] Now listening on: http://0.0.0.0:5000
2025-04-21 14:22:02.301 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-21 14:22:02.302 -03:00 [INF] Hosting environment: Development
2025-04-21 14:22:02.303 -03:00 [INF] Content root path: C:\Users\randolfo\Documents\Sistema-de-Gestao\SistemaDeGesto
2025-04-21 14:24:23.528 -03:00 [INF] User profile is available. Using 'C:\Users\randolfo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-21 14:24:23.752 -03:00 [WRN] Overriding address(es) 'http://0.0.0.0:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-04-21 14:24:23.786 -03:00 [INF] Now listening on: http://0.0.0.0:5000
2025-04-21 14:24:23.854 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-21 14:24:23.855 -03:00 [INF] Hosting environment: Development
2025-04-21 14:24:23.856 -03:00 [INF] Content root path: C:\Users\randolfo\Documents\Sistema-de-Gestao\SistemaDeGesto
2025-04-21 14:26:40.274 -03:00 [INF] User profile is available. Using 'C:\Users\randolfo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-21 14:26:42.319 -03:00 [WRN] Overriding address(es) 'http://0.0.0.0:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-04-21 14:26:42.344 -03:00 [INF] Now listening on: http://0.0.0.0:5000
2025-04-21 14:26:42.409 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-21 14:26:42.410 -03:00 [INF] Hosting environment: Development
2025-04-21 14:26:42.411 -03:00 [INF] Content root path: C:\Users\randolfo\Documents\Sistema-de-Gestao\SistemaDeGesto
2025-04-21 14:27:13.792 -03:00 [INF] User profile is available. Using 'C:\Users\randolfo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-21 14:27:21.201 -03:00 [WRN] Overriding address(es) 'http://0.0.0.0:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-04-21 14:27:21.229 -03:00 [INF] Now listening on: http://0.0.0.0:5000
2025-04-21 14:27:21.292 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-21 14:27:21.293 -03:00 [INF] Hosting environment: Development
2025-04-21 14:27:21.293 -03:00 [INF] Content root path: C:\Users\randolfo\Documents\Sistema-de-Gestao\SistemaDeGesto
2025-04-21 14:27:34.626 -03:00 [INF] Request starting HTTP/1.1 GET http://0.0.0.0:5000/api/1.0/MercadoPago/testewebhook - application/json 238
2025-04-21 14:27:34.651 -03:00 [WRN] Failed to determine the https port for redirect.
2025-04-21 14:27:34.842 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2025 22:07:02', Current time (UTC): '21/04/2025 17:27:34'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-04-21 14:27:34.869 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '19/04/2025 22:07:02', Current time (UTC): '21/04/2025 17:27:34'.
2025-04-21 14:27:34.875 -03:00 [INF] Executing endpoint 'SistemaDeGestao.Controllers.MercadoPagoController.TesteWebhook (SistemaDeGestao)'
2025-04-21 14:27:34.889 -03:00 [INF] Route matched with {action = "TesteWebhook", controller = "MercadoPago", area = ""}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult TesteWebhook() on controller SistemaDeGestao.Controllers.MercadoPagoController (SistemaDeGestao).
2025-04-21 14:27:35.550 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2025-04-21 14:27:35.566 -03:00 [INF] Executed action SistemaDeGestao.Controllers.MercadoPagoController.TesteWebhook (SistemaDeGestao) in 673.3938ms
2025-04-21 14:27:35.567 -03:00 [INF] Executed endpoint 'SistemaDeGestao.Controllers.MercadoPagoController.TesteWebhook (SistemaDeGestao)'
2025-04-21 14:27:35.574 -03:00 [INF] Request finished HTTP/1.1 GET http://0.0.0.0:5000/api/1.0/MercadoPago/testewebhook - 200 null text/plain; charset=utf-8 956.8412ms
2025-04-21 20:20:59.948 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 20:21:36.298 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 20:24:51.413 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 20:25:08.032 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 20:30:24.057 -03:00 [ERR] An error occurred using the connection to database '' on server 'db'.
2025-04-21 20:33:23.728 -03:00 [ERR] An error occurred using the connection to database '' on server 'sistema-db'.
2025-04-21 20:35:28.613 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='db_lai' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 20:35:28.772 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `__EFMigrationsHistory` (
    `MigrationId` varchar(150) CHARACTER SET utf8mb4 NOT NULL,
    `ProductVersion` varchar(32) CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK___EFMigrationsHistory` PRIMARY KEY (`MigrationId`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.781 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='db_lai' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 20:35:28.790 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-04-21 20:35:28.799 -03:00 [INF] Applying migration '20250419202540_FirstMigration'.
2025-04-21 20:35:28.866 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-04-21 20:35:28.886 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `DiasFuncionamento` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Domingo` tinyint(1) NOT NULL,
    `Segunda` tinyint(1) NOT NULL,
    `Terca` tinyint(1) NOT NULL,
    `Quarta` tinyint(1) NOT NULL,
    `Quinta` tinyint(1) NOT NULL,
    `Sexta` tinyint(1) NOT NULL,
    `Sabado` tinyint(1) NOT NULL,
    CONSTRAINT `PK_DiasFuncionamento` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.900 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `EnderecosEntregas` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Logradouro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Numero` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Complemento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CEP` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_EnderecosEntregas` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.916 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `FinalUsers` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Telefone` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCriacao` datetime(6) NOT NULL,
    CONSTRAINT `PK_FinalUsers` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.930 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidoPagamento` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `SubTotal` decimal(18,2) NOT NULL,
    `TransactionId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `TaxaEntrega` decimal(18,2) NOT NULL,
    `Desconto` decimal(18,2) NOT NULL,
    `ValorTotal` decimal(18,2) NOT NULL,
    `FormaPagamento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PagamentoAprovado` tinyint(1) NOT NULL,
    `DataAprovacao` datetime(6) NULL,
    CONSTRAINT `PK_PedidoPagamento` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.944 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidosPendentes` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `TransactionId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `PedidoJson` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCriacao` datetime(6) NOT NULL,
    CONSTRAINT `PK_PedidosPendentes` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.958 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Restaurantes` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserName` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `PhoneNumber` longtext CHARACTER SET utf8mb4 NULL,
    `EmailAddress` longtext CHARACTER SET utf8mb4 NULL,
    `NomeDaLoja` longtext CHARACTER SET utf8mb4 NULL,
    `Password` longtext CHARACTER SET utf8mb4 NOT NULL,
    `refreshToken` longtext CHARACTER SET utf8mb4 NULL,
    `refreshTokenExpiryTime` datetime(6) NOT NULL,
    CONSTRAINT `PK_Restaurantes` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.973 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Categorias` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_Categorias` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Categorias_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:28.993 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Empresas` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `CNPJ` longtext CHARACTER SET utf8mb4 NULL,
    `CPF` longtext CHARACTER SET utf8mb4 NULL,
    `RazaoSocial` longtext CHARACTER SET utf8mb4 NULL,
    `NomeFantasia` longtext CHARACTER SET utf8mb4 NULL,
    `Endereco` longtext CHARACTER SET utf8mb4 NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NULL,
    `Estado` longtext CHARACTER SET utf8mb4 NULL,
    `Cep` longtext CHARACTER SET utf8mb4 NULL,
    `HorarioAbertura` time(6) NOT NULL,
    `HorarioFechamento` time(6) NOT NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NULL,
    `RestauranteId` int NOT NULL,
    `DiasFuncionamentoId` int NOT NULL,
    CONSTRAINT `PK_Empresas` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Empresas_DiasFuncionamento_DiasFuncionamentoId` FOREIGN KEY (`DiasFuncionamentoId`) REFERENCES `DiasFuncionamento` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Empresas_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:29.187 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `GrupoAdicionais` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `LimiteSelecao` int NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_GrupoAdicionais` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_GrupoAdicionais_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:29.205 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `GrupoComplementos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `Obrigatorio` tinyint(1) NOT NULL,
    `QuantidadeMinima` int NULL,
    `QuantidadeMaxima` int NULL,
    `RestauranteId` int NOT NULL,
    CONSTRAINT `PK_GrupoComplementos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_GrupoComplementos_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:29.233 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Pedidos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Numero` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataPedido` datetime(6) NOT NULL,
    `Status` int NOT NULL,
    `FinalUserId` int NULL,
    `FinalUserName` varchar(256) CHARACTER SET utf8mb4 NOT NULL,
    `FinalUserTelefone` varchar(20) CHARACTER SET utf8mb4 NOT NULL,
    `EnderecoEntregaId` int NULL,
    `NomeDaLoja` longtext CHARACTER SET utf8mb4 NOT NULL,
    `RestauranteId` int NOT NULL,
    `PagamentoId` int NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_Pedidos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Pedidos_EnderecosEntregas_EnderecoEntregaId` FOREIGN KEY (`EnderecoEntregaId`) REFERENCES `EnderecosEntregas` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Pedidos_FinalUsers_FinalUserId` FOREIGN KEY (`FinalUserId`) REFERENCES `FinalUsers` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_Pedidos_PedidoPagamento_PagamentoId` FOREIGN KEY (`PagamentoId`) REFERENCES `PedidoPagamento` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Pedidos_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:29.254 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `RestauranteCredenciaisMercadoPago` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `RestauranteId` int NOT NULL,
    `PublicKey` longtext CHARACTER SET utf8mb4 NOT NULL,
    `AccessToken` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ClientId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `ClientSecret` longtext CHARACTER SET utf8mb4 NOT NULL,
    `DataCadastro` datetime(6) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    CONSTRAINT `PK_RestauranteCredenciaisMercadoPago` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_RestauranteCredenciaisMercadoPago_Restaurantes_RestauranteId` FOREIGN KEY (`RestauranteId`) REFERENCES `Restaurantes` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:31.882 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Produtos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NULL,
    `CategoriaId` int NOT NULL,
    `PrecoCusto` decimal(18,2) NOT NULL,
    `PrecoVenda` decimal(18,2) NOT NULL,
    `EstoqueAtual` int NOT NULL,
    `EstoqueMinimo` int NOT NULL,
    `UnidadeMedida` longtext CHARACTER SET utf8mb4 NULL,
    `Ativo` tinyint(1) NOT NULL,
    `DataCadastro` datetime(6) NOT NULL,
    `ImagemPrincipalUrl` longtext CHARACTER SET utf8mb4 NULL,
    `LojaId` int NOT NULL,
    CONSTRAINT `PK_Produtos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Produtos_Categorias_CategoriaId` FOREIGN KEY (`CategoriaId`) REFERENCES `Categorias` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Produtos_Restaurantes_LojaId` FOREIGN KEY (`LojaId`) REFERENCES `Restaurantes` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:31.901 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Adicionais` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `PrecoBase` decimal(18,2) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    `GrupoAdicionalId` int NULL,
    `EstoqueAtual` int NULL,
    `DataCadastro` datetime(6) NOT NULL,
    CONSTRAINT `PK_Adicionais` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Adicionais_GrupoAdicionais_GrupoAdicionalId` FOREIGN KEY (`GrupoAdicionalId`) REFERENCES `GrupoAdicionais` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:31.922 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Complementos` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Nome` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Descricao` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `Preco` decimal(18,2) NOT NULL,
    `Ativo` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    `GrupoComplementoId` int NULL,
    `EstoqueAtual` int NULL,
    `DataCadastro` datetime(6) NOT NULL,
    CONSTRAINT `PK_Complementos` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Complementos_GrupoComplementos_GrupoComplementoId` FOREIGN KEY (`GrupoComplementoId`) REFERENCES `GrupoComplementos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:31.960 -03:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `PedidosCancelados` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PedidoId` int NOT NULL,
    `DataCancelamento` datetime(6) NOT NULL,
    `MotivoCancelamento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CodigoReembolso` longtext CHARACTER SET utf8mb4 NOT NULL,
    `EstaReembolsado` tinyint(1) NOT NULL,
    `ValorReembolsado` decimal(65,30) NOT NULL,
    `TransacaoReembolsoId` longtext CHARACTER SET utf8mb4 NOT NULL,
    `FinalUserId` int NOT NULL,
    CONSTRAINT `PK_PedidosCancelados` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_PedidosCancelados_FinalUsers_FinalUserId` FOREIGN KEY (`FinalUserId`) REFERENCES `FinalUsers` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_PedidosCancelados_Pedidos_PedidoId` FOREIGN KEY (`PedidoId`) REFERENCES `Pedidos` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:31.983 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ItensPedido` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `PedidoId` int NOT NULL,
    `ProdutoId` int NOT NULL,
    `NomeProduto` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Quantidade` int NOT NULL,
    `PrecoUnitario` decimal(18,2) NOT NULL,
    `SubTotal` decimal(18,2) NOT NULL,
    `PrecoCusto` decimal(18,2) NOT NULL,
    `Observacoes` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_ItensPedido` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ItensPedido_Pedidos_PedidoId` FOREIGN KEY (`PedidoId`) REFERENCES `Pedidos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ItensPedido_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:35.145 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoGrupoAdicional` (
    `ProdutoId` int NOT NULL,
    `GrupoAdicionalId` int NOT NULL,
    CONSTRAINT `PK_ProdutoGrupoAdicional` PRIMARY KEY (`ProdutoId`, `GrupoAdicionalId`),
    CONSTRAINT `FK_ProdutoGrupoAdicional_GrupoAdicionais_GrupoAdicionalId` FOREIGN KEY (`GrupoAdicionalId`) REFERENCES `GrupoAdicionais` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoGrupoAdicional_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:35.167 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutosGruposComplementos` (
    `ProdutoId` int NOT NULL,
    `GrupoComplementoId` int NOT NULL,
    CONSTRAINT `PK_ProdutosGruposComplementos` PRIMARY KEY (`ProdutoId`, `GrupoComplementoId`),
    CONSTRAINT `FK_ProdutosGruposComplementos_GrupoComplementos_GrupoComplement~` FOREIGN KEY (`GrupoComplementoId`) REFERENCES `GrupoComplementos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutosGruposComplementos_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:35.192 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoAdicionais` (
    `ProdutoId` int NOT NULL,
    `AdicionalId` int NOT NULL,
    `Id` int NOT NULL,
    `PrecoAdicional` decimal(65,30) NOT NULL,
    `MaximoPorProduto` int NULL,
    CONSTRAINT `PK_ProdutoAdicionais` PRIMARY KEY (`ProdutoId`, `AdicionalId`),
    CONSTRAINT `FK_ProdutoAdicionais_Adicionais_AdicionalId` FOREIGN KEY (`AdicionalId`) REFERENCES `Adicionais` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoAdicionais_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:35.226 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutoComplementos` (
    `ProdutoId` int NOT NULL,
    `ComplementoId` int NOT NULL,
    `Id` int NOT NULL,
    `Obrigatorio` tinyint(1) NOT NULL,
    `MaximoPorProduto` int NULL,
    CONSTRAINT `PK_ProdutoComplementos` PRIMARY KEY (`ProdutoId`, `ComplementoId`),
    CONSTRAINT `FK_ProdutoComplementos_Complementos_ComplementoId` FOREIGN KEY (`ComplementoId`) REFERENCES `Complementos` (`Id`) ON DELETE RESTRICT,
    CONSTRAINT `FK_ProdutoComplementos_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:35.246 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ItemPedidoOpcao` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `ItemPedidoId` int NOT NULL,
    `TipoOpcao` int NOT NULL,
    `ReferenciaId` int NOT NULL,
    `Nome` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Quantidade` int NOT NULL,
    `PrecoUnitario` decimal(18,2) NOT NULL,
    CONSTRAINT `PK_ItemPedidoOpcao` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ItemPedidoOpcao_ItensPedido_ItemPedidoId` FOREIGN KEY (`ItemPedidoId`) REFERENCES `ItensPedido` (`Id`) ON DELETE RESTRICT
) CHARACTER SET=utf8mb4;
2025-04-21 20:35:35.264 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Adicionais_GrupoAdicionalId` ON `Adicionais` (`GrupoAdicionalId`);
2025-04-21 20:35:35.281 -03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Categorias_RestauranteId` ON `Categorias` (`RestauranteId`);
2025-04-21 20:35:35.303 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Complementos_GrupoComplementoId` ON `Complementos` (`GrupoComplementoId`);
2025-04-21 20:35:37.444 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Empresas_DiasFuncionamentoId` ON `Empresas` (`DiasFuncionamentoId`);
2025-04-21 20:35:37.455 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Empresas_RestauranteId` ON `Empresas` (`RestauranteId`);
2025-04-21 20:35:37.470 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_GrupoAdicionais_RestauranteId` ON `GrupoAdicionais` (`RestauranteId`);
2025-04-21 20:35:37.487 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_GrupoComplementos_RestauranteId` ON `GrupoComplementos` (`RestauranteId`);
2025-04-21 20:35:37.500 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItemPedidoOpcao_ItemPedidoId` ON `ItemPedidoOpcao` (`ItemPedidoId`);
2025-04-21 20:35:37.515 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItensPedido_PedidoId` ON `ItensPedido` (`PedidoId`);
2025-04-21 20:35:37.528 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ItensPedido_ProdutoId` ON `ItensPedido` (`ProdutoId`);
2025-04-21 20:35:37.546 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_EnderecoEntregaId` ON `Pedidos` (`EnderecoEntregaId`);
2025-04-21 20:35:37.562 -03:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_FinalUserId` ON `Pedidos` (`FinalUserId`);
2025-04-21 20:35:37.579 -03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Pedidos_PagamentoId` ON `Pedidos` (`PagamentoId`);
2025-04-21 20:35:37.599 -03:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Pedidos_RestauranteId` ON `Pedidos` (`RestauranteId`);
2025-04-21 20:35:37.618 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PedidosCancelados_FinalUserId` ON `PedidosCancelados` (`FinalUserId`);
2025-04-21 20:35:37.630 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_PedidosCancelados_PedidoId` ON `PedidosCancelados` (`PedidoId`);
2025-04-21 20:35:37.645 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoAdicionais_AdicionalId` ON `ProdutoAdicionais` (`AdicionalId`);
2025-04-21 20:35:37.657 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoComplementos_ComplementoId` ON `ProdutoComplementos` (`ComplementoId`);
2025-04-21 20:35:37.669 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutoGrupoAdicional_GrupoAdicionalId` ON `ProdutoGrupoAdicional` (`GrupoAdicionalId`);
2025-04-21 20:35:37.687 -03:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Produtos_CategoriaId` ON `Produtos` (`CategoriaId`);
2025-04-21 20:35:37.706 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Produtos_LojaId` ON `Produtos` (`LojaId`);
2025-04-21 20:35:37.719 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutosGruposComplementos_GrupoComplementoId` ON `ProdutosGruposComplementos` (`GrupoComplementoId`);
2025-04-21 20:35:37.730 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_RestauranteCredenciaisMercadoPago_RestauranteId` ON `RestauranteCredenciaisMercadoPago` (`RestauranteId`);
2025-04-21 20:35:37.733 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20250419202540_FirstMigration', '8.0.8');
2025-04-21 20:36:58.218 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='db_lai' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 20:36:58.261 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='db_lai' AND TABLE_NAME='__EFMigrationsHistory';
2025-04-21 20:36:58.278 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2025-04-21 20:36:58.289 -03:00 [INF] No migrations were applied. The database is already up to date.
2025-04-21 20:36:58.478 -03:00 [INF] User profile is available. Using 'C:\Users\randolfo\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-04-21 20:36:58.690 -03:00 [WRN] Overriding address(es) 'http://0.0.0.0:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-04-21 20:36:58.705 -03:00 [INF] Now listening on: http://0.0.0.0:5000
2025-04-21 20:36:58.797 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-04-21 20:36:58.798 -03:00 [INF] Hosting environment: Development
2025-04-21 20:36:58.799 -03:00 [INF] Content root path: C:\Users\randolfo\Documents\Sistema-de-Gestao\SistemaDeGestao
2025-04-21 20:37:02.272 -03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5000/ - null null
2025-04-21 20:37:02.405 -03:00 [WRN] Failed to determine the https port for redirect.
2025-04-21 20:37:02.521 -03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5000/ - 404 0 null 257.6547ms
2025-04-21 20:37:02.525 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5000/, Response status code: 404
